<img src="img/loader.gif" ng-show="!app" />

<div ng-show="app">
	<h1>
	  {{ app.document_count }} <small>document{{ app.document_count > 1 ? 's' : '' }} in the database</small>
	</h1>

  <div class="row well" ng-file-drop ng-model="dropFiles" drag-over-class="bg-success" style="min-height: 150px;"
       ng-multiple="true" allow-dir="false" accept="image/*,application/pdf,application/zip" ng-file-change="fileDropped($files, $event, $rejectedFiles)">
    <div class="col-xs-6 col-sm-4 col-md-3 col-lg-2 text-center" ng-repeat="file in files">
      <div class="thumbnail" ng-if="file.id">
        <a ng-click="openFile(file)">
          <img class="thumbnail-file" ng-src="../api/file/{{ file.id }}/data?size=thumb" tooltip="{{ file.mimetype }}" tooltip-placement="top" />
        </a>
        <div class="caption">
          <div class="pull-right">
            <button class="btn btn-danger" ng-click="deleteFile(file)"><span class="glyphicon glyphicon-trash"></span></button>
          </div>
          <div class="clearfix"></div>
        </div>
      </div>

      <div class="thumbnail" ng-if="!file.id">
        <p class="text-center lead">
          Uploading...
        </p>
        <div class="caption">
          <progressbar value="file.progress" class="progress-info active"></progressbar>
        </div>
      </div>
    </div>

    <p class="text-center well-lg" ng-if="files.length == 0">
      <span class="glyphicon glyphicon-move"></span>
      Drag &amp; drop files here to upload
    </p>
  </div>

  <div ui-view="file"></div>

	<div class="text-muted text-right">
	  <ul class="list-inline">
	    <li><strong>Version:</strong> {{ app.current_version }}</li>
	    <li><strong>Memory:</strong> {{ app.free_memory / 1000000 | number: 0 }}/{{ app.total_memory / 1000000 | number: 0 }} MB</li>
	  </ul>
	</div>
</div>