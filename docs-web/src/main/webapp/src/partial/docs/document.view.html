<img src="img/loader.gif" ng-show="!document && !error" />

<div ng-show="error" class="well-lg">
  <p class="text-center" ng-show="error.status == 404">
    <span class="glyphicon glyphicon-warning-sign"></span>
    Document not found
  </p>
</div>

<div ng-show="document">
	<div class="text-right" ng-show="document.writable">
	  <div class="btn-group">
	    <button class="btn btn-danger" ng-click="deleteDocument(document)"><span class="glyphicon glyphicon-trash"></span> Delete</button>
	    <a href="#/document/edit/{{ document.id }}" class="btn btn-primary"><span class="glyphicon glyphicon-pencil"></span> Edit</a>
	  </div>
	</div>
	
	<div class="page-header">
	  <h1>
      {{ document.title }} <small>{{ document.create_date | date: 'yyyy-MM-dd' }} by {{ document.creator }}</small>
      <img ng-if="document" ng-src="img/flag/{{ document.language }}.png" title="{{ document.language }}" />
      <a ng-href="../api/file/zip?id={{ document.id }}" class="btn btn-default" title="Download all files">
        <span class="glyphicon glyphicon-download-alt"></span>
      </a>
    </h1>
	  <p ng-show="document.writable">
	    <button class="btn btn-sm btn-info" ng-click="share()">
        <span class="glyphicon glyphicon-share"></span> Share
      </button>
	    <button class="btn btn-default btn-sm" ng-repeat="share in document.acls | filter: { 'type': 'SHARE' }" ng-click="showShare(share)">
        <span class="glyphicon glyphicon-ok"></span> {{ share.name ? share.name : 'shared' }}
      </button>
	  </p>
	  <ul class="list-inline">
	    <li ng-repeat="tag in document.tags">
        <span class="label label-info" ng-style="{ 'background': tag.color }">{{ tag.name }}</span>
      </li>
	  </ul>
	</div>

  <ul class="nav nav-tabs">
    <li ng-class="{ active: $state.current.name == 'document.view.content' }">
      <a href="#/document/view/{{ document.id }}/content">
        <span class="glyphicon glyphicon-file"></span> Content
      </a>
    </li>
    <li ng-class="{ active: $state.current.name == 'document.view.permissions' }">
      <a href="#/document/view/{{ document.id }}/permissions">
        <span class="glyphicon glyphicon-user"></span> Permissions
      </a>
    </li>
    <li ng-class="{ active: $state.current.name == 'document.view.activity' }">
      <a href="#/document/view/{{ document.id }}/activity">
        <span class="glyphicon glyphicon-tasks"></span> Activity
      </a>
    </li>
  </ul>

  <div ui-view="tab"></div>
	<div ui-view="file"></div>
</div>